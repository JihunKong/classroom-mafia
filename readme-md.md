# 🎭 한국형 마피아 게임 (Korean Mafia Game)

실시간 멀티플레이어 마피아 게임 웹 애플리케이션

## 📱 소개

학교 교실에서 학생들이 스마트폰으로 쉽게 즐길 수 있는 마피아 게임입니다. 별도의 사회자 없이 자동으로 게임이 진행되며, 인원수에 따라 자동으로 역할 밸런스를 맞춰줍니다.

## ✨ 주요 기능

- 📱 모바일 최적화 인터페이스
- 🎮 실시간 멀티플레이어 (6-20명)
- 🎭 다양한 특수 역할 (15종 이상)
- 🗣️ TTS 음성 안내
- 🔢 간단한 4자리 참여 코드
- ⚡ 자동 게임 진행 (사회자 불필요)
- 💬 데드챗 - 사망자끼리 대화 가능

## 🎯 지원 역할

### 마피아 팀 (악역) 🔴
- **마피아** 🔫: 밤에 시민을 제거하는 기본 악역
- **스파이** 🕵️: 경찰 조사에서 시민으로 나타나는 특수 마피아
- **늑대인간** 🐺: 짝수 날 밤에 추가 제거 가능
- **간첩** 🎭: 시민 역할로 위장하는 마피아

### 시민 팀 (선역) 🔵
- **시민** 👥: 투표로 마피아를 찾아내는 일반 시민
- **경찰** 👮: 밤에 한 명의 정체를 조사
- **의사** 💊: 밤에 한 명을 보호
- **군인** 🪖: 첫 공격을 자동 방어
- **기자** 📰: 조사한 정보를 모두에게 공개
- **탐정** 🔍: 80% 확률로 정확한 조사
- **술집사장** 🍺: 상대의 능력을 봉인
- **치어리더** 📣: 투표권을 2표로 강화 (1회)
- **마법사** 🧙: 상대의 투표권을 봉인
- **영매** 👻: 죽은 사람의 역할 확인
- **도둑** 🦹: 다른 사람의 능력 복사

### 중립/특수 역할 ⚪
- **변절자** 🔄: 조건에 따라 팀 변경
- **테러리스트** 💣: 죽을 때 무작위로 한 명 제거
- **환술사** 🎩: 두 사람의 역할 교환 (2회)
- **귀신** 👻: 죽어서도 투표 가능

## 🎮 인원수별 역할 배분

| 인원 | 마피아팀 | 시민팀 | 특수역할 |
|------|----------|--------|----------|
| 6명  | 마피아(1) | 시민(4), 의사(1) | - |
| 7명  | 마피아(2) | 시민(4), 의사(1) | - |
| 8명  | 마피아(2) | 시민(5), 의사(1) | - |
| 9명  | 마피아(2) | 시민(5), 의사(1), 경찰(1) | - |
| 10명 | 마피아(2) | 시민(5), 의사(1), 경찰(1), 군인(1) | - |
| 11명 | 마피아(2), 스파이(1) | 시민(5), 의사(1), 경찰(1), 군인(1) | - |
| 12명 | 마피아(3) | 시민(5), 의사(1), 경찰(1), 군인(1), 기자(1) | - |
| 13명 | 마피아(3), 스파이(1) | 시민(5), 의사(1), 경찰(1), 군인(1), 기자(1) | - |
| 14명 | 마피아(3), 스파이(1) | 시민(6), 의사(1), 경찰(1), 군인(1), 탐정(1) | - |
| 15명 | 마피아(3), 스파이(1) | 시민(6), 의사(1), 경찰(1), 군인(1), 기자(1), 술집사장(1) | - |
| 16명 | 마피아(3), 스파이(1) | 시민(6), 의사(1), 경찰(1), 군인(1), 기자(1), 술집사장(1) | 테러리스트(1) |
| 17명 | 마피아(3), 스파이(1), 늑대인간(1) | 시민(6), 의사(1), 경찰(1), 군인(1), 기자(1), 술집사장(1) | 테러리스트(1) |
| 18명 | 마피아(3), 스파이(1), 늑대인간(1) | 시민(7), 의사(1), 경찰(1), 군인(1), 기자(1), 영매(1) | 테러리스트(1) |
| 19명 | 마피아(3), 스파이(1), 늑대인간(1) | 시민(7), 의사(1), 경찰(1), 군인(1), 기자(1), 마법사(1), 영매(1) | 테러리스트(1) |
| 20명 | 마피아(3), 스파이(1), 늑대인간(1), 간첩(1) | 시민(7), 의사(1), 경찰(1), 군인(1), 기자(1), 마법사(1), 도둑(1) | 환술사(1) |

## 🚀 시작하기

### 필요 사항
- Node.js 18.0 이상
- npm 또는 yarn

### 설치 방법

```bash
# 저장소 클론
git clone https://github.com/yourusername/korean-mafia-game.git
cd korean-mafia-game

# 의존성 설치
npm run install:all

# 개발 서버 실행
npm run dev
```

### 환경 변수 설정

#### Client (.env)
```env
VITE_SERVER_URL=http://localhost:3001
VITE_SOCKET_URL=http://localhost:3001
```

#### Server (.env)
```env
PORT=3001
NODE_ENV=development
CLIENT_URL=http://localhost:5173
```

## 📁 프로젝트 구조

```
korean-mafia-game/
├── client/                 # React 프론트엔드
│   ├── src/
│   │   ├── components/    # UI 컴포넌트
│   │   ├── pages/        # 페이지 컴포넌트
│   │   ├── hooks/        # 커스텀 훅
│   │   ├── store/        # Redux 스토어
│   │   ├── services/     # API/Socket 서비스
│   │   └── types/        # TypeScript 타입
│   └── package.json
├── server/                # Node.js 백엔드
│   ├── src/
│   │   ├── controllers/  # 요청 핸들러
│   │   ├── services/     # 비즈니스 로직
│   │   ├── socket/       # Socket.io 핸들러
│   │   └── types/        # TypeScript 타입
│   └── package.json
└── shared/               # 공유 타입/상수
```

## 🎮 게임 진행 방법

### 1. 방 만들기 (방장)
1. "방 만들기" 버튼 클릭
2. 참가 인원 설정 (6-12명)
3. 특수 역할 선택 (선택사항)
4. 4자리 참여 코드 생성

### 2. 게임 참여 (참가자)
1. "참여하기" 버튼 클릭
2. 4자리 참여 코드 입력
3. 게임에서 사용할 이름 입력

### 3. 게임 진행
1. **역할 배정**: 자동으로 랜덤 배정
2. **낮**: 3분간 토론 후 의심자 지목
3. **투표**: 지목된 사람의 처형 여부 결정
4. **밤**: 각 역할별 능력 사용
5. **결과 확인**: 밤 동안의 사건 공개

### 4. 승리 조건
- **시민 승리**: 모든 마피아 제거
- **마피아 승리**: 마피아 수 ≥ 시민 수

## 🛠️ 기술 스택

### Frontend
- React 18 + TypeScript
- Redux Toolkit
- Socket.io Client
- Tailwind CSS
- Vite

### Backend
- Node.js + Express
- TypeScript
- Socket.io
- In-memory game state

## 📝 개발 명령어

```bash
# 전체 설치
npm run install:all

# 개발 모드 실행 (클라이언트 + 서버)
npm run dev

# 클라이언트만 실행
npm run dev:client

# 서버만 실행
npm run dev:server

# 빌드
npm run build

# 테스트
npm run test

# 린트
npm run lint
```

## 🤝 기여하기

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## 📜 라이선스

이 프로젝트는 MIT 라이선스를 따릅니다. 자세한 내용은 [LICENSE](LICENSE) 파일을 참조하세요.

## 👥 제작자

- 프로젝트 기획 및 개발: [Your Name]

## 🙏 감사의 말

이 프로젝트는 학교 현장에서 학생들과 함께 즐거운 시간을 보내고자 하는 선생님들을 위해 만들어졌습니다.